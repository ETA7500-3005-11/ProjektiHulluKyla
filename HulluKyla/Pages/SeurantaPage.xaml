<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:HulluKyla.Models.Controls"
             x:Class="HulluKyla.Pages.SeurantaPage">

    <ScrollView>
        <VerticalStackLayout Padding="10" Spacing="15">

            <!-- Asiakasvalinta-alue -->
            <Frame BorderColor="Gray" CornerRadius="10" Padding="10">
                <VerticalStackLayout Spacing="10">
                    <SearchBar x:Name="AsiakasSearchBar"
                               Placeholder="Etsi asiakasta..."
                               TextChanged="AsiakasSearchBar_TextChanged"
                               HorizontalOptions="Center"
                               WidthRequest="300"/>
                    <CollectionView x:Name="AsiakasListaView"
                                    HeightRequest="200"
                                    SelectionMode="Single"
                                    SelectionChanged="AsiakasListaView_SelectionChanged">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame Padding="10" Margin="0,5" BackgroundColor="Transparent" CornerRadius="10">
                                    <Label Text="{Binding KokoNimi}"/>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- Laskut-alue -->
            <Frame BorderColor="Gray" CornerRadius="10" Padding="10">
                <VerticalStackLayout Spacing="10">

                    <!-- Laskun moodi nappi -->
                    <controls:ThreeDButton 
                            x:Name="VaihdaNakymaButton"
                            Text="Maksamattomat Laskut"
                            Clicked="VaihdaNakyma_Clicked"
                            CornerRadius="10"
                            WidthRequest="200"
                            HorizontalOptions="Center"/>

                    <!-- Sarakeotsikot -->
                    <Grid ColumnDefinitions="*,*,*" Padding="0,5">
                        <Label Text="Lasku ID" TextColor="Gray" FontAttributes="Bold"/>
                        <Label Text="Varaus ID" TextColor="Gray" FontAttributes="Bold" Grid.Column="1"/>
                        <Label Text="Summa" TextColor="Gray" FontAttributes="Bold" Grid.Column="2" HorizontalTextAlignment="End"/>
                    </Grid>

                    <!-- Laskulista -->
                    <CollectionView x:Name="LaskuLista" HeightRequest="300"
                                    SelectionMode="Single"
                                    SelectionChanged="LaskuLista_SelectionChanged">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="*,*,*" Padding="5" Margin="0,5">
                                    <Label Text="{Binding LaskuId}" Grid.Column="0" VerticalOptions="Center"/>
                                    <Label Text="{Binding VarausId}"  Grid.Column="1" VerticalOptions="Center"/>
                                    <Label Text="{Binding Summa, StringFormat='{0:0.00} euroa'}"
                                           TextColor="White"
                                           HorizontalTextAlignment="End"
                                           Grid.Column="2"
                                           VerticalOptions="Center"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                    <!-- Ei laskuja ilmoitus -->
                    <Label x:Name="TyhjaIlmoitus"
                           Text="Ei laskuja"
                           TextColor="Gray"
                           FontAttributes="Italic"
                           HorizontalOptions="Center"
                           IsVisible="False"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Napit -->
            <Grid ColumnDefinitions="*,*" Padding="10">
                <!-- Etusivu-nappi -->
                    <controls:ThreeDButton 
                        Text="Etusivu"
                        Clicked="Navigoi_Clicked"
                        CommandParameter="Etusivu"
                        HorizontalOptions="Start"
                        CornerRadius="10"
                        WidthRequest="100"/>
                
                <HorizontalStackLayout HorizontalOptions="End" Spacing="10" Grid.Column="1">
                        <!-- Tulosta-nappi -->
                    <controls:ThreeDButton 
                        Text="Tulosta"
                        Clicked="TulostaLasku_Clicked"
                        x:Name="TulostaButton"
                        CornerRadius="10"
                        WidthRequest="100"
                        HorizontalOptions="Center"/>

                    <!-- Merkitse maksetuksi-nappi -->
                    <controls:ThreeDButton 
                        Text="Merkiste maksetuksi"
                        Clicked="MerkitseMaksetuksi_Clicked"
                        x:Name="MerkitseMaksetuksiButton"
                        CornerRadius="10"
                        WidthRequest="180"
                        HorizontalOptions="End"/>
                </HorizontalStackLayout>
            </Grid>
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
